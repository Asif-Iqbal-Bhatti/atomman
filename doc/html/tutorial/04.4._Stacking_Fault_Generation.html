
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Introduction to atomman: Stacking Fault Generation &#8212; atomman 1.2.6 documentation</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.2.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Introduction to atomman: Gamma Surface Plotting" href="04.5._Gamma_Surface_Plotting.html" />
    <link rel="prev" title="Introduction to atomman: Dislocation analysis tools" href="04.3._Dislocation_analysis_tools.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="04.5._Gamma_Surface_Plotting.html" title="Introduction to atomman: Gamma Surface Plotting"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="04.3._Dislocation_analysis_tools.html" title="Introduction to atomman: Dislocation analysis tools"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">atomman 1.2.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Tutorials</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput,
div.nbinput div.prompt,
div.nbinput div.input_area,
div.nbinput div[class*=highlight],
div.nbinput div[class*=highlight] pre,
div.nboutput,
div.nbinput div.prompt,
div.nbinput div.output_area,
div.nboutput div[class*=highlight],
div.nboutput div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput,
div.nboutput {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput,
    div.nboutput {
        flex-direction: column;
    }
}

/* input container */
div.nbinput {
    padding-top: 5px;
}

/* last container */
div.nblast {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput div.prompt pre {
    color: #303F9F;
}

/* output prompt */
div.nboutput div.prompt pre {
    color: #D84315;
}

/* all prompts */
div.nbinput div.prompt,
div.nboutput div.prompt {
    min-width: 9ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput div.prompt,
    div.nboutput div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput div.prompt pre,
div.nboutput div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput div.input_area,
div.nboutput div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput div.input_area,
    div.nboutput div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput div.input_area {
    border: 1px solid #cfcfcf;
    border-radius: 2px;
    background: #f7f7f7;
}

/* override MathJax center alignment in output cells */
div.nboutput div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.pngmath center alignment in output cells */
div.nboutput div.math p {
    text-align: left;
}

/* standard error */
div.nboutput div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }
</style>
<div class="section" id="Introduction-to-atomman:-Stacking-Fault-Generation">
<h1>Introduction to atomman: Stacking Fault Generation<a class="headerlink" href="#Introduction-to-atomman:-Stacking-Fault-Generation" title="Permalink to this headline">¶</a></h1>
<p><strong>Lucas M. Hale</strong>,
<a class="reference external" href="mailto:lucas&#46;hale&#37;&#52;&#48;nist&#46;gov?Subject=ipr-demo">lucas<span>&#46;</span>hale<span>&#64;</span>nist<span>&#46;</span>gov</a>,
<em>Materials Science and Engineering Division, NIST</em>.</p>
<p><a class="reference external" href="http://www.nist.gov/public_affairs/disclaimer.cfm">Disclaimers</a></p>
<div class="section" id="1.-Introduction">
<h2>1. Introduction<a class="headerlink" href="#1.-Introduction" title="Permalink to this headline">¶</a></h2>
<p>This Notebook outlines the StackingFault class which generates atomic
systems that can be used to evaluate stacking fault energies. See the
<a class="reference external" href="04.5._Gamma_Surface_Plotting.html">04.5 Gamma Surface Plotting
Notebook</a> for analysis and
plotting of computed stacking fault energies.</p>
<p><em>New as of version 1.2.6</em></p>
<p><strong>Library Imports</strong></p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Standard Python libraries</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span>
                        <span class="n">division</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="c1"># http://www.numpy.org/</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># https://github.com/usnistgov/atomman</span>
<span class="kn">import</span> <span class="nn">atomman</span> <span class="k">as</span> <span class="nn">am</span>
<span class="kn">import</span> <span class="nn">atomman.unitconvert</span> <span class="k">as</span> <span class="nn">uc</span>

<span class="c1"># Show atomman version</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;atomman version =&#39;</span><span class="p">,</span> <span class="n">am</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>

<span class="c1"># Show date of Notebook execution</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Notebook executed on&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
atomman version = 1.2.6
Notebook executed on 2019-04-23
</pre></div></div>
</div>
</div>
<div class="section" id="2.-Underlying-theory">
<h2>2. Underlying theory<a class="headerlink" href="#2.-Underlying-theory" title="Permalink to this headline">¶</a></h2>
<div class="section" id="2.1-Basic-system-design">
<h3>2.1 Basic system design<a class="headerlink" href="#2.1-Basic-system-design" title="Permalink to this headline">¶</a></h3>
<p>Atomic configurations investigating stacking faults are constructed by</p>
<ol class="arabic simple">
<li>Starting with a unit cell system.</li>
<li>Generating a new supercell system by rotating the unit cell such that
the slip plane being investigated is perpendicular to one of the
three Cartesian vectors, and only one box vector of the rotated
system has a component out of the slip plane.</li>
<li>The boundary conditions are kept periodic along the two box vectors
within the slip plane and made non-periodic along the box vector with
the out-of-plane component.</li>
<li>All atoms above the defined slip plane are displaced by the same
shift vector, <span class="math">\(\mathbf{d}\)</span>.</li>
</ol>
<p>With the conditions of step 2, there are only three options for how to
construct the generic system. The cutboxvector parameter controls this:</p>
<ul class="simple">
<li>cutboxvector = ‘a’: the slip plane is perpendicular to the x-axis,
and only the <span class="math">\(\mathbf{a}\)</span> box vector has a component in the x
direction.</li>
<li>cutboxvector = ‘b’: the slip plane is perpendicular to the y-axis,
and only the <span class="math">\(\mathbf{b}\)</span> box vector has a component in the y
direction.</li>
<li>cutboxvector = ‘c’: the slip plane is perpendicular to the z-axis,
and only the <span class="math">\(\mathbf{c}\)</span> box vector has a component in the z
direction.</li>
</ul>
<p>The area of the fault plane, <span class="math">\(A_{fault}\)</span>, can be computed using
the two box vectors that are not the cut box vector. For example, if the
cut box vector is <span class="math">\(\mathbf{c}\)</span>, then</p>
<div class="math">
\[A_{fault} = \left| \mathbf{a} \times \mathbf{b} \right|\]</div>
</div>
<div class="section" id="2.2-Slip-vector">
<h3>2.2 Slip vector<a class="headerlink" href="#2.2-Slip-vector" title="Permalink to this headline">¶</a></h3>
<p>As the slip plane can be explored in 2 dimensions, the applied shift,
<span class="math">\(\mathbf{d}\)</span>, can be expressed using two non-parallel vectors
within the fault plane, <span class="math">\(\mathbf{a_1}\)</span> and <span class="math">\(\mathbf{a_2}\)</span>.
Taking <span class="math">\(\mathbf{a_1}\)</span> and <span class="math">\(\mathbf{a_2}\)</span> as lattice slip
vectors (i.e. vectors between two symmetrically identical lattice sites)
will define a 2D cell encompassing all possible unique stacking fault
shifts for the fault plane. <span class="math">\(\mathbf{d}\)</span> can then be represented
using fractional coordinates, <span class="math">\(a_1\)</span> and <span class="math">\(a_2\)</span>, relative to
<span class="math">\(\mathbf{a_1}\)</span> and <span class="math">\(\mathbf{a_2}\)</span></p>
<div class="math">
\[\mathbf{d} = a_1 \mathbf{a_1} + a_2 \mathbf{a_2}\]</div>
<p>One complication related to defining the <span class="math">\(\mathbf{a_1}\)</span> and
<span class="math">\(\mathbf{a_2}\)</span> slip vectors is that we typically think of their
values in crystallographic Miller or Miller-Bravais indices, but the
shifting vector <span class="math">\(\mathbf{d}\)</span> needs to be in Cartesian units
corresponding to the atomic system. To better facilitate this
difference, the class allows for a reference unit cell box and
transformation matrix to also be given. This allows for the
<span class="math">\(\mathbf{a_1}\)</span> and <span class="math">\(\mathbf{a_2}\)</span> vectors to be given in
Miller or Miller-Bravais indices relative to the unit cell box, and then
transformed from the unit cell’s Cartesian axes to the system’s
Cartesian axes.</p>
</div>
</div>
<div class="section" id="3.-Class-methods">
<h2>3. Class methods<a class="headerlink" href="#3.-Class-methods" title="Permalink to this headline">¶</a></h2>
<div class="section" id="3.1-StackingFault-initialization">
<h3>3.1 StackingFault initialization<a class="headerlink" href="#3.1-StackingFault-initialization" title="Permalink to this headline">¶</a></h3>
<p>Initializes an object for generating generalized stacking fault atomic
configurations.</p>
<p>Parameters</p>
<ul class="simple">
<li><strong>system</strong> (<em>atomman.System</em>) The atomic system to generate stacking
fault configurations from. The system should be oriented such that
the stacking fault plane is parallel to either the xy-plane, the
xz-plane or the yz-plane.</li>
<li><strong>a1vect</strong> (<em>array-like object, optional</em>) A slip vector within the
slip plane. Depending on if ucellbox and transform are given, this
can be either a Miller crystal vector or a Cartesian vector relative
to the supplied system. If a1vect is not given and a2vect is, then
a1vect is set to [0,0,0].</li>
<li><strong>a2vect</strong> (<em>array-like object, optional</em>) A slip vector within the
slip plane. Depending on if ucellbox and transform are given, this
can be either a Miller crystal vector or a Cartesian vector relative
to the supplied system. If a2vect is not given and a1vect is, then
a2vect is set to [0,0,0].</li>
<li><strong>ucellbox</strong> (<em>atomman.Box, optional</em>) If ucellbox is given, then the
a1vect and a2vect slip vectors are taken as Miller crystal vectors
relative to ucellbox. If not given, then the slip vectors are taken
as Cartesian vectors.</li>
<li><strong>transform</strong> (<em>array-like object, optional</em>) A transformation tensor
to apply to the a1vect and a2vect slip vectors. This is needed if
system is oriented differently than ucellbox, i.e. system is rotated.</li>
<li><strong>cutboxvector</strong> (<em>str, optional</em>) Defines which of the three box
vectors gets cut so that the slip plane can be added. ‘a’ indicates
the slip plane is parallel to the yz-plane, ‘b’ the xz-plane and ‘c’
the xy-plane. Note that the specified cutboxvector is the only box
vector allowed to have a component out of the slip plane.</li>
<li><strong>faultposrel</strong> (<em>float, optional</em>) The position to place the slip
plane within the system given as a relative coordinate along the
out-of-plane direction. faultposrel and faultposcart cannot both be
given. Default value is 0.5 if faultposcart is also not given.</li>
<li><strong>faultposcart</strong> (<em>float, optional</em>) The position to place the slip
plane within the system given as a Cartesian coordinate along the
out-of-plane direction. faultposrel and faultposcart cannot both be
given.</li>
<li><strong>vacuumwidth</strong> (<em>float, optional</em>) If given, the out-of-plane
dimension of system is increased by this amount to create a vacuum
region. Useful if the generated configurations are to be evaluated
with DFT.</li>
</ul>
</div>
<div class="section" id="3.2-StackingFault.set()">
<h3>3.2 StackingFault.set()<a class="headerlink" href="#3.2-StackingFault.set()" title="Permalink to this headline">¶</a></h3>
<p>Sets generation parameters associated with a stacking fault.</p>
<p>Parameters</p>
<ul class="simple">
<li><strong>system</strong> (<em>atomman.System</em>) The atomic system to generate stacking
fault configurations from. The system should be oriented such that
the stacking fault plane is parallel to either the xy-plane, the
xz-plane or the yz-plane.</li>
<li><strong>a1vect</strong> (<em>array-like object, optional</em>) A slip vector within the
slip plane. Depending on if ucellbox and transform are given, this
can be either a Miller crystal vector or a Cartesian vector relative
to the supplied system. If a1vect is not given and a2vect is, then
a1vect is set to [0,0,0].</li>
<li><strong>a2vect</strong> (<em>array-like object, optional</em>) A slip vector within the
slip plane. Depending on if ucellbox and transform are given, this
can be either a Miller crystal vector or a Cartesian vector relative
to the supplied system. If a2vect is not given and a1vect is, then
a2vect is set to [0,0,0].</li>
<li><strong>ucellbox</strong> (<em>atomman.Box, optional</em>) If ucellbox is given, then the
a1vect and a2vect slip vectors are taken as Miller crystal vectors
relative to ucellbox. If not given, then the slip vectors are taken
as Cartesian vectors.</li>
<li><strong>transform</strong> (<em>array-like object, optional</em>) A transformation tensor
to apply to the a1vect and a2vect slip vectors. This is needed if
system is oriented differently than ucellbox, i.e. system is rotated.</li>
<li><strong>cutboxvector</strong> (<em>str, optional</em>) Defines which of the three box
vectors gets cut so that the slip plane can be added. ‘a’ indicates
the slip plane is parallel to the yz-plane, ‘b’ the xz-plane and ‘c’
the xy-plane. Note that the specified cutboxvector is the only box
vector allowed to have a component out of the slip plane.</li>
<li><strong>faultposrel</strong> (<em>float, optional</em>) The position to place the slip
plane within the system given as a relative coordinate along the
out-of-plane direction. faultposrel and faultposcart cannot both be
given. Default value is 0.5 if faultposcart is also not given.</li>
<li><strong>faultposcart</strong> (<em>float, optional</em>) The position to place the slip
plane within the system given as a Cartesian coordinate along the
out-of-plane direction. faultposrel and faultposcart cannot both be
given.</li>
<li><strong>vacuumwidth</strong> (<em>float, optional</em>) If given, the out-of-plane
dimension of system is increased by this amount to create a vacuum
region. Useful if the generated configurations are to be evaluated
with DFT.</li>
</ul>
</div>
<div class="section" id="3.3-StackingFault.fault()">
<h3>3.3 StackingFault.fault()<a class="headerlink" href="#3.3-StackingFault.fault()" title="Permalink to this headline">¶</a></h3>
<p>Generates a fault configuration by displacing all atoms above the slip
plane.</p>
<p>Parameters</p>
<ul class="simple">
<li><strong>a1</strong> (<em>float, optional</em>) The fractional coordinate of a1vect to
shift by. Default value is 0.0.</li>
<li><strong>a2</strong> (<em>float, optional</em>) The fractional coordinate of a2vect to
shift by. Default value is 0.0.</li>
<li><strong>outofplane</strong> (<em>float, optional</em>) An out-of-plane shift, given in
absolute units. Default value is 0.0.</li>
<li><strong>faultshift</strong> (<em>array-like object, optional</em>) The full shifting
vector to displace the atoms above the slip plane by. Cannot be given
with a1, a2, or outofplane.</li>
</ul>
<p>Returns</p>
<ul class="simple">
<li>(<em>atomman.System</em>) The atomic configuration with stacking fault shift</li>
</ul>
</div>
<div class="section" id="3.4-StackingFault.iterfaultmap()">
<h3>3.4 StackingFault.iterfaultmap()<a class="headerlink" href="#3.4-StackingFault.iterfaultmap()" title="Permalink to this headline">¶</a></h3>
<p>Iterates over generalized stacking fault configurations associated with
a 2D map of equally spaced a1, a2 coordinates.</p>
<p>Parameters</p>
<ul class="simple">
<li><strong>num_a1</strong> (<em>int</em>) The number of a1 values to generate systems for.
Default value is 1 (only generate for a1=0.0).</li>
<li><strong>num_a2</strong> (<em>int</em>) The number of a2 values to generate systems for.
Default value is 1 (only generate for a2=0.0).</li>
<li><strong>outofplane</strong> (<em>float, optional</em>) An out-of-plane shift, given in
absolute units. Default value is 0.0.</li>
</ul>
<p>Yields</p>
<ul class="simple">
<li><strong>a1</strong> (<em>float</em>) The a1 fractional coordinate of a1vect.</li>
<li><strong>a2</strong> (<em>float</em>) The a2 fractional coordinate of a2vect.</li>
<li>(<em>atomman.System</em>) The fault configuration associated with the a1, a2
shift.</li>
</ul>
</div>
</div>
<div class="section" id="4.-Examples">
<h2>4. Examples<a class="headerlink" href="#4.-Examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="4.1-fcc-{}&lt;&gt;-fault-path">
<h3>4.1 fcc {<span class="math">\(111\)</span>}&lt;<span class="math">\(11\bar{2}\)</span>&gt; fault path<a class="headerlink" href="#4.1-fcc-{}<>-fault-path" title="Permalink to this headline">¶</a></h3>
<p>A 1D path can be generated by only specifying a1vect.</p>
<p>Generate conventional fcc unit cell</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">set_in_units</span><span class="p">(</span><span class="mf">4.05</span><span class="p">,</span> <span class="s1">&#39;angstrom&#39;</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">Atoms</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]])</span>
<span class="n">ucell</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">System</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">am</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="n">cubic</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Define parameters for the system</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Specify cutboxvector option</span>
<span class="n">cutboxvector</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>

<span class="c1"># Rotate ucell such that the new box vectors correspond to these Miller indices</span>
<span class="n">a_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">b_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">c_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">uvws</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a_uvw</span><span class="p">,</span> <span class="n">b_uvw</span><span class="p">,</span> <span class="n">c_uvw</span><span class="p">])</span>

<span class="c1"># Specify a small shift to avoid atoms exactly at non-periodic boundary and fault plane</span>
<span class="n">shift</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>

<span class="c1"># Define shift vector in Miller indices relative to ucell</span>
<span class="n">a1vect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Rotate system, shift and supersize. Note that rotate returns
transformation matrix relative to ucell.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">system</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">ucell</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">uvws</span><span class="p">,</span> <span class="n">return_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">shift</span><span class="p">,</span> <span class="n">system</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">vects</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">wrap</span><span class="p">()</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">supersize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Initialize the StackingFault object and check parameters</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">sf</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">defect</span><span class="o">.</span><span class="n">StackingFault</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">a1vect</span><span class="o">=</span><span class="n">a1vect</span><span class="p">,</span> <span class="n">ucellbox</span><span class="o">=</span><span class="n">ucell</span><span class="o">.</span><span class="n">box</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">natoms</span><span class="p">,</span> <span class="s1">&#39;total atoms.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">atype</span><span class="p">[</span><span class="n">sf</span><span class="o">.</span><span class="n">abovefault</span><span class="p">]),</span> <span class="s1">&#39;atoms above the fault&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault plane is at z =&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">faultposcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fault system&#39;s pbc is&quot;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">pbc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a1vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vectcart</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Fault system has 48 total atoms.
Fault system has 24 atoms above the fault
Fault plane is at z = 14.029611541307906

Fault system&#39;s pbc is [ True  True False]

a1vect as given: [ 0.5  0.5 -1. ]
Cartesian a1vect: [-4.29567370e+00 -2.48010836e+00  5.84243286e-17]
</pre></div></div>
</div>
<p>Generate a single stacking fault configuration with
StackingFault.fault()</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">faultsystem</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">fault</span><span class="p">(</span><span class="n">a1</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;atoms in faultsystem are displaced by:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">am</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">faultsystem</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
atoms in faultsystem are displaced by:
[[ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [ 0.          0.          0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]
 [-2.14783685 -1.24005418  0.        ]]
</pre></div></div>
</div>
<p>Generate configurations along the slip line with
StackingFault.iterfaultmap(). Note that the displacements may wrap due
to periodic boundaries.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">faultsystem</span> <span class="ow">in</span> <span class="n">sf</span><span class="o">.</span><span class="n">iterfaultmap</span><span class="p">(</span><span class="n">num_a1</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">faultsystem</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1 = </span><span class="si">%.1f</span><span class="s1">, d = [</span><span class="si">%7.4f</span><span class="s1"> </span><span class="si">%7.4f</span><span class="s1"> </span><span class="si">%7.4f</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a1 = 0.0, d = [ 0.0000  0.0000  0.0000]
a1 = 0.1, d = [-0.4296 -0.2480  0.0000]
a1 = 0.2, d = [-0.8591 -0.4960  0.0000]
a1 = 0.3, d = [-1.2887 -0.7440  0.0000]
a1 = 0.4, d = [-1.7183 -0.9920  0.0000]
a1 = 0.5, d = [-2.1478 -1.2401  0.0000]
a1 = 0.6, d = [-2.5774 -1.4881  0.0000]
a1 = 0.7, d = [-0.1432  3.2241  0.0000]
a1 = 0.8, d = [-0.5728  2.9761  0.0000]
a1 = 0.9, d = [-1.0023  2.7281  0.0000]
</pre></div></div>
</div>
</div>
<div class="section" id="4.2-fcc-{111}-slip-plane-2D-map">
<h3>4.2 fcc {111} slip plane 2D map<a class="headerlink" href="#4.2-fcc-{111}-slip-plane-2D-map" title="Permalink to this headline">¶</a></h3>
<p>Alternatively, a 2D map for any slip plane can be evaluated by
specifying both a1vect and a2vect as non-parallel vectors.</p>
<p>Define parameters for the system. Note that a1vect and a2vect are the
two shortest non-parallel Miller vectors in the slip plane.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Specify cutboxvector option</span>
<span class="n">cutboxvector</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>

<span class="c1"># Rotate ucell such that the new box vectors correspond to these Miller indices</span>
<span class="n">a_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">b_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">c_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">uvws</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a_uvw</span><span class="p">,</span> <span class="n">b_uvw</span><span class="p">,</span> <span class="n">c_uvw</span><span class="p">])</span>

<span class="c1"># Specify a small shift to avoid atoms exactly at non-periodic boundary and fault plane</span>
<span class="n">shift</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>

<span class="c1"># Define shift vectors in Miller indices relative to ucell</span>
<span class="n">a1vect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">a2vect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Rotate system, shift and supersize. Note that rotate returns
transformation matrix relative to ucell.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">system</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">ucell</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">uvws</span><span class="p">,</span> <span class="n">return_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">shift</span><span class="p">,</span> <span class="n">system</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">vects</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">wrap</span><span class="p">()</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">supersize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Initialize the StackingFault object and check parameters</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">sf</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">defect</span><span class="o">.</span><span class="n">StackingFault</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">a1vect</span><span class="o">=</span><span class="n">a1vect</span><span class="p">,</span> <span class="n">a2vect</span><span class="o">=</span><span class="n">a2vect</span><span class="p">,</span> <span class="n">ucellbox</span><span class="o">=</span><span class="n">ucell</span><span class="o">.</span><span class="n">box</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">natoms</span><span class="p">,</span> <span class="s1">&#39;total atoms.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">atype</span><span class="p">[</span><span class="n">sf</span><span class="o">.</span><span class="n">abovefault</span><span class="p">]),</span> <span class="s1">&#39;atoms above the fault&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault plane is at z =&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">faultposcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fault system&#39;s pbc is&quot;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">pbc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a1vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vectcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a2vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a2vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vectcart</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Fault system has 48 total atoms.
Fault system has 24 atoms above the fault
Fault plane is at z = 14.029611541307906

Fault system&#39;s pbc is [ True  True False]

a1vect as given: [ 0.  -0.5  0.5]
Cartesian a1vect: [ 2.86378246e+00  1.62192634e-16 -2.51256769e-16]

a2vect as given: [-0.5  0.   0.5]
Cartesian a2vect: [ 1.43189123e+00  2.48010836e+00 -2.92121643e-17]
</pre></div></div>
</div>
<p>Now, StackingFault.iterfaultmap() can generate a 2D map. Note that the
&lt;<span class="math">\(\bar{1}\bar{1}2\)</span>&gt; path corresponds to the points where a1 = a2</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">faultsystem</span> <span class="ow">in</span> <span class="n">sf</span><span class="o">.</span><span class="n">iterfaultmap</span><span class="p">(</span><span class="n">num_a1</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">num_a2</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">faultsystem</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1 = </span><span class="si">%.1f</span><span class="s1">, a2 = </span><span class="si">%.1f</span><span class="s1">, d = [</span><span class="si">%7.4f</span><span class="s1"> </span><span class="si">%7.4f</span><span class="s1"> </span><span class="si">%7.4f</span><span class="s1">]&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a1</span><span class="p">,</span> <span class="n">a2</span><span class="p">,</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
a1 = 0.0, a2 = 0.0, d = [ 0.0000  0.0000  0.0000]
a1 = 0.2, a2 = 0.0, d = [ 0.5728  0.0000  0.0000]
a1 = 0.4, a2 = 0.0, d = [ 1.1455  0.0000  0.0000]
a1 = 0.6, a2 = 0.0, d = [ 1.7183  0.0000  0.0000]
a1 = 0.8, a2 = 0.0, d = [ 2.2910  0.0000  0.0000]
a1 = 0.0, a2 = 0.2, d = [ 0.2864  0.4960  0.0000]
a1 = 0.2, a2 = 0.2, d = [ 0.8591  0.4960  0.0000]
a1 = 0.4, a2 = 0.2, d = [ 1.4319  0.4960  0.0000]
a1 = 0.6, a2 = 0.2, d = [ 2.0046  0.4960  0.0000]
a1 = 0.8, a2 = 0.2, d = [ 2.5774  0.4960  0.0000]
a1 = 0.0, a2 = 0.4, d = [ 0.5728  0.9920  0.0000]
a1 = 0.2, a2 = 0.4, d = [ 1.1455  0.9920  0.0000]
a1 = 0.4, a2 = 0.4, d = [ 1.7183  0.9920  0.0000]
a1 = 0.6, a2 = 0.4, d = [ 2.2910  0.9920  0.0000]
a1 = 0.8, a2 = 0.4, d = [ 2.8638  0.9920  0.0000]
a1 = 0.0, a2 = 0.6, d = [ 0.8591  1.4881  0.0000]
a1 = 0.2, a2 = 0.6, d = [ 1.4319  1.4881  0.0000]
a1 = 0.4, a2 = 0.6, d = [ 2.0046  1.4881  0.0000]
a1 = 0.6, a2 = 0.6, d = [ 2.5774  1.4881  0.0000]
a1 = 0.8, a2 = 0.6, d = [-2.5774  1.4881  0.0000]
a1 = 0.0, a2 = 0.8, d = [ 1.1455  1.9841  0.0000]
a1 = 0.2, a2 = 0.8, d = [ 1.7183  1.9841  0.0000]
a1 = 0.4, a2 = 0.8, d = [-0.5728 -2.9761  0.0000]
a1 = 0.6, a2 = 0.8, d = [-0.0000 -2.9761  0.0000]
a1 = 0.8, a2 = 0.8, d = [-2.2910  1.9841  0.0000]
</pre></div></div>
</div>
</div>
<div class="section" id="4.3-fcc-{111}-slip-plane-using-primitive-cell">
<h3>4.3 fcc {111} slip plane using primitive cell<a class="headerlink" href="#4.3-fcc-{111}-slip-plane-using-primitive-cell" title="Permalink to this headline">¶</a></h3>
<p>For DFT simulations, it is usually preferred to generate atomic
configurations from the primitive unit cells rather than the
conventional ones as the primitive cells have fewer atoms. The challenge
with doing so is that the Miller vectors used for rotating and defining
the shift vectors need to be relative to the <em>primitive</em> cell rather
than the conventional one. This can easily be handled in atomman with
the atomman.tools.miller.vector_conventional_to_primitive() function.</p>
<p>Generate primitive fcc unit cell</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">set_in_units</span><span class="p">(</span><span class="mf">4.05</span><span class="p">,</span> <span class="s1">&#39;angstrom&#39;</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">Atoms</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]])</span>
<span class="n">ucell</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">System</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">am</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="n">trigonal</span><span class="p">(</span><span class="n">a</span><span class="o">/</span><span class="mi">2</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">60</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Define parameters for the system relative to the conventional cell.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Specify cutboxvector option</span>
<span class="n">cutboxvector</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>

<span class="c1"># Rotate ucell such that the new box vectors correspond to these Miller indices</span>
<span class="n">a_uvw</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">b_uvw</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">c_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">uvws</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a_uvw</span><span class="p">,</span> <span class="n">b_uvw</span><span class="p">,</span> <span class="n">c_uvw</span><span class="p">])</span>

<span class="c1"># Specify a small shift to avoid atoms exactly at non-periodic boundary and fault plane</span>
<span class="n">shift</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>

<span class="c1"># Define shift vectors in Miller indices relative to ucell</span>
<span class="n">a1vect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">a2vect</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>Convert uvws, a1vect and a2vect to primitive Miller indices</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">uvws_primitive</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">miller</span><span class="o">.</span><span class="n">vector_conventional_to_primitive</span><span class="p">(</span><span class="n">uvws</span><span class="p">,</span> <span class="n">setting</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;primitive uvws =&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">uvws_primitive</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="n">a1vect_primitive</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">miller</span><span class="o">.</span><span class="n">vector_conventional_to_primitive</span><span class="p">(</span><span class="n">a1vect</span><span class="p">,</span> <span class="n">setting</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="n">a2vect_primitive</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">tools</span><span class="o">.</span><span class="n">miller</span><span class="o">.</span><span class="n">vector_conventional_to_primitive</span><span class="p">(</span><span class="n">a2vect</span><span class="p">,</span> <span class="n">setting</span><span class="o">=</span><span class="s1">&#39;f&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;primitive a1vect =&#39;</span><span class="p">,</span> <span class="n">a1vect_primitive</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;primitive a2vect =&#39;</span><span class="p">,</span> <span class="n">a2vect_primitive</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
primitive uvws =
[[-1.  1.  0.]
 [-1.  0.  1.]
 [ 1.  1.  1.]]

primitive a1vect = [-1.  1.  0.]
primitive a2vect = [-1.  0.  1.]
</pre></div></div>
</div>
<p>Rotate system, shift and supersize. Note that rotate returns
transformation matrix relative to ucell.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">system</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">ucell</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">uvws_primitive</span><span class="p">,</span> <span class="n">return_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">shift</span><span class="p">,</span> <span class="n">system</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">vects</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">wrap</span><span class="p">()</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">supersize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Initialize the StackingFault object and check parameters</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">sf</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">defect</span><span class="o">.</span><span class="n">StackingFault</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">a1vect</span><span class="o">=</span><span class="n">a1vect_primitive</span><span class="p">,</span> <span class="n">a2vect</span><span class="o">=</span><span class="n">a2vect_primitive</span><span class="p">,</span>
                             <span class="n">ucellbox</span><span class="o">=</span><span class="n">ucell</span><span class="o">.</span><span class="n">box</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">natoms</span><span class="p">,</span> <span class="s1">&#39;total atoms.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">atype</span><span class="p">[</span><span class="n">sf</span><span class="o">.</span><span class="n">abovefault</span><span class="p">]),</span> <span class="s1">&#39;atoms above the fault&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault plane is at z =&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">faultposcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fault system&#39;s pbc is&quot;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">pbc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a1vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vectcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a2vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a2vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vectcart</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Fault system has 12 total atoms.
Fault system has 6 atoms above the fault
Fault plane is at z = 14.029611541307904

Fault system&#39;s pbc is [ True  True False]

a1vect as given: [-1.  1.  0.]
Cartesian a1vect: [2.86378246e+00 3.10932627e-17 9.57795207e-16]

a2vect as given: [-1.  0.  1.]
Cartesian a2vect: [1.43189123e+00 2.48010836e+00 1.41222587e-16]
</pre></div></div>
</div>
<p>This system has the same fault plane position and Cartesian shift
vectors as the above example, but 1/4 the atoms!</p>
</div>
<div class="section" id="4.4-hcp-{0001}-slip-plane">
<h3>4.4 hcp {0001} slip plane<a class="headerlink" href="#4.4-hcp-{0001}-slip-plane" title="Permalink to this headline">¶</a></h3>
<p>The system rotation vectors and the shifting vectors can be given in
Miller-Bravais indices if the reference unit cell is hexagonal.</p>
<p>Generate hcp unit cell</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">a</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">set_in_units</span><span class="p">(</span><span class="mf">3.18</span><span class="p">,</span> <span class="s1">&#39;angstrom&#39;</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">uc</span><span class="o">.</span><span class="n">set_in_units</span><span class="p">(</span><span class="mf">5.17</span><span class="p">,</span> <span class="s1">&#39;angstrom&#39;</span><span class="p">)</span>
<span class="n">atoms</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">Atoms</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]])</span>
<span class="n">ucell</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">System</span><span class="p">(</span><span class="n">atoms</span><span class="o">=</span><span class="n">atoms</span><span class="p">,</span> <span class="n">box</span><span class="o">=</span><span class="n">am</span><span class="o">.</span><span class="n">Box</span><span class="o">.</span><span class="n">hexagonal</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Define parameters for the system</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="c1"># Specify cutboxvector option</span>
<span class="n">cutboxvector</span> <span class="o">=</span> <span class="s1">&#39;c&#39;</span>

<span class="c1"># Rotate ucell such that the new box vectors correspond to these Miller indices</span>
<span class="n">a_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
<span class="n">b_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
<span class="n">c_uvw</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span>  <span class="mi">1</span><span class="p">])</span>
<span class="n">uvws</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">a_uvw</span><span class="p">,</span> <span class="n">b_uvw</span><span class="p">,</span> <span class="n">c_uvw</span><span class="p">])</span>

<span class="c1"># Specify a small shift to avoid atoms exactly at non-periodic boundary and fault plane</span>
<span class="n">shift</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">])</span>

<span class="c1"># Define shift vectors in Miller indices relative to ucell</span>
<span class="n">a1vect</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>  <span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
<span class="n">a2vect</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span> <span class="mi">1</span><span class="p">,</span>  <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>  <span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<p>Rotate system, shift and supersize. Note that rotate returns
transformation matrix relative to ucell.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">system</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">ucell</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">uvws</span><span class="p">,</span> <span class="n">return_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">shift</span><span class="p">,</span> <span class="n">system</span><span class="o">.</span><span class="n">box</span><span class="o">.</span><span class="n">vects</span><span class="p">)</span>
<span class="n">system</span><span class="o">.</span><span class="n">wrap</span><span class="p">()</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">system</span><span class="o">.</span><span class="n">supersize</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Initialize the StackingFault object and check parameters</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">sf</span> <span class="o">=</span> <span class="n">am</span><span class="o">.</span><span class="n">defect</span><span class="o">.</span><span class="n">StackingFault</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">a1vect</span><span class="o">=</span><span class="n">a1vect</span><span class="p">,</span> <span class="n">a2vect</span><span class="o">=</span><span class="n">a2vect</span><span class="p">,</span> <span class="n">ucellbox</span><span class="o">=</span><span class="n">ucell</span><span class="o">.</span><span class="n">box</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">transform</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">natoms</span><span class="p">,</span> <span class="s1">&#39;total atoms.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault system has&#39;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">atoms</span><span class="o">.</span><span class="n">atype</span><span class="p">[</span><span class="n">sf</span><span class="o">.</span><span class="n">abovefault</span><span class="p">]),</span> <span class="s1">&#39;atoms above the fault&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fault plane is at z =&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">faultposcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Fault system&#39;s pbc is&quot;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">pbc</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a1vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a1vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a1vectcart</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a2vect as given:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vect</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cartesian a2vect:&#39;</span><span class="p">,</span> <span class="n">sf</span><span class="o">.</span><span class="n">a2vectcart</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Fault system has 8 total atoms.
Fault system has 4 atoms above the fault
Fault plane is at z = 10.34

Fault system&#39;s pbc is [ True  True False]

a1vect as given: [ 0.66666667 -0.33333333 -0.33333333  0.        ]
Cartesian a1vect: [3.18000000e+00 2.73153518e-16 0.00000000e+00]

a2vect as given: [ 0.33333333  0.33333333 -0.66666667  0.        ]
Cartesian a2vect: [1.59       2.75396078 0.        ]
</pre></div></div>
</div>
<p>Generate a single stacking fault configuration with
StackingFault.fault()</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none"><div class="highlight"><pre>
<span></span>In [21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3"><div class="highlight"><pre>
<span></span><span class="n">faultsystem</span> <span class="o">=</span> <span class="n">sf</span><span class="o">.</span><span class="n">fault</span><span class="p">(</span><span class="n">a1</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">a2</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;atoms in faultsystem are displaced by:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">am</span><span class="o">.</span><span class="n">displacement</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">faultsystem</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
atoms in faultsystem are displaced by:
[[0.00000000e+00 0.00000000e+00 0.00000000e+00]
 [0.00000000e+00 0.00000000e+00 0.00000000e+00]
 [0.00000000e+00 0.00000000e+00 0.00000000e+00]
 [0.00000000e+00 0.00000000e+00 8.88178420e-16]
 [4.77000000e-01 2.75396078e-01 0.00000000e+00]
 [4.77000000e-01 2.75396078e-01 1.77635684e-15]
 [4.77000000e-01 2.75396078e-01 0.00000000e+00]
 [4.77000000e-01 2.75396078e-01 3.55271368e-15]]
</pre></div></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Introduction to atomman: Stacking Fault Generation</a><ul>
<li><a class="reference internal" href="#1.-Introduction">1. Introduction</a></li>
<li><a class="reference internal" href="#2.-Underlying-theory">2. Underlying theory</a><ul>
<li><a class="reference internal" href="#2.1-Basic-system-design">2.1 Basic system design</a></li>
<li><a class="reference internal" href="#2.2-Slip-vector">2.2 Slip vector</a></li>
</ul>
</li>
<li><a class="reference internal" href="#3.-Class-methods">3. Class methods</a><ul>
<li><a class="reference internal" href="#3.1-StackingFault-initialization">3.1 StackingFault initialization</a></li>
<li><a class="reference internal" href="#3.2-StackingFault.set()">3.2 StackingFault.set()</a></li>
<li><a class="reference internal" href="#3.3-StackingFault.fault()">3.3 StackingFault.fault()</a></li>
<li><a class="reference internal" href="#3.4-StackingFault.iterfaultmap()">3.4 StackingFault.iterfaultmap()</a></li>
</ul>
</li>
<li><a class="reference internal" href="#4.-Examples">4. Examples</a><ul>
<li><a class="reference internal" href="#4.1-fcc-{}&lt;&gt;-fault-path">4.1 fcc {<span class="math">\(111\)</span>}&lt;<span class="math">\(11\bar{2}\)</span>&gt; fault path</a></li>
<li><a class="reference internal" href="#4.2-fcc-{111}-slip-plane-2D-map">4.2 fcc {111} slip plane 2D map</a></li>
<li><a class="reference internal" href="#4.3-fcc-{111}-slip-plane-using-primitive-cell">4.3 fcc {111} slip plane using primitive cell</a></li>
<li><a class="reference internal" href="#4.4-hcp-{0001}-slip-plane">4.4 hcp {0001} slip plane</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="04.3._Dislocation_analysis_tools.html"
                        title="previous chapter">Introduction to atomman: Dislocation analysis tools</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="04.5._Gamma_Surface_Plotting.html"
                        title="next chapter">Introduction to atomman: Gamma Surface Plotting</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="04.5._Gamma_Surface_Plotting.html" title="Introduction to atomman: Gamma Surface Plotting"
             >next</a> |</li>
        <li class="right" >
          <a href="04.3._Dislocation_analysis_tools.html" title="Introduction to atomman: Dislocation analysis tools"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">atomman 1.2.6 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Tutorials</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.6.
    </div>
  </body>
</html>